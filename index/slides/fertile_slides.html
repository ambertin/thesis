<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Creating optimal conditions for reproducible data analysis in R with ‘fertile’</title>
    <meta charset="utf-8" />
    <meta name="author" content="Audrey Bertin" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Creating optimal conditions for reproducible data analysis in R with ‘fertile’
### Audrey Bertin
### Smith College, ’21
### April 29th, 2021

---








## Introduction

`fertile`:
  - **What?** `R` package started by Prof. Ben Baumer
  - **Goal:** Improve reproducibility in R
  - **My Role:** Leading code development for the last ~2 years!
  - **This Year:** Advanced features, getting product ready for public use, and experimental testing.
  
&lt;img src="fertile-hex.png" width="250" height="270" style="display: block; margin: auto;" /&gt;


---
## Overview

1. What is reproducibility and why is it lacking?
2. Other attempts to address reproducibility and their shortcomings
3. Why `fertile` is different
4. How `fertile` works
5. Potential applications and Smith College experiment
6. Conclusion
7. Accessing project materials

---
## What is reproducibility?

&gt; In data science, research is considered fully __reproducible__ when the requisite code and data files produce identical results when run by another analyst.


.center[VS]

&gt; __Replicability__: The ability of a researcher to duplicate the results of a study when following the original procedure but collecting new data


---
## The benefits of reproducibility

1. Trusting findings

2. Receiving feedback

3. Extending ideas

---
## The reproducibility crisis

*Nature (2016)*: 52% respondents claim "crisis"

Vast majority cannot reproduce others' work. 

Half cannot even reproduce their own!

Some fields have reproducibility rate &lt;10%.

&lt;img src="nature-1.jpeg" width="50%" /&gt;

---
&lt;img src="nature-2.png" width="551" /&gt;

---
background-image: url("tidy-badge.png")
background-position: right bottom
background-size: 30%

## The six major components of reproducibility


1. Basic project components made accessible to the public:

- Data (raw and/or processed)

- Metadata

- Code

- Related Software



---
background-image: url("structure-badge.png")
background-position: right bottom
background-size: 30%

## The six major components of reproducibility

2. Well-organized file structure:

- Separate folders for different file types

- No extraneous files

- Minimal clutter


---
background-image: url("documentation-badge.png")
background-position: right bottom
background-size: 30%

## The six major components of reproducibility


3. The project is documented well:

- Files are clearly named / ordered

- A README is present

- Code contains comments

- Software dependencies are noted



---
background-image: url("paths-badge.png")
background-position: right bottom
background-size: 30%

## The six major components of reproducibility


4. Good file paths:

- No absolute paths

- No paths leading outside of a project’s directory

- Only relative paths within directory


---
background-image: url("randomness-badge.png")
background-position: right bottom
background-size: 30%

## The six major components of reproducibility


5. Randomness is accounted for:

- If used, seed must be set

---
background-image: url("style-badge.png")
background-position: right bottom
background-size: 30%

## The six major components of reproducibility

6. Code is readable and consistently styled:

- Coherent style
- Follow guide (e.g. `tidyverse`)


---
## Attempts to address reproducibility: journals

&lt;img src="stats-journals.png" width="80%" /&gt;
- Even if you have a reproducibility statement that does not mean that all the articles are reproducible!! 

---
## Attempts to address reproducibility: journals

### TOP Factor

- Helps measure state of academic reproducibility on the whole
- Score range: 0-30
- Approx 50% of journals = 5 or below
- Only 5% score &gt; 15

---
## Attempts to address reproducibility: educational programs

- Replication studies at Graduate level (Cambridge, Harvard, UNC, Penn State, Berkeley)
- At undergraduate level, requirement for work to be completed in `.Rmd` (Smith, Duke)

---
## Attempts to address reproducibility: software

- `rrtools`: create basic package structure, Docker dependency management
- `orderly`: automation of projects
- `workflowr`: version control
- `checkers`: custom checks to assess reproducibility
- `renv` (formerly `packrat`): dependency management
- `drake`: makefiles
- `reproducible`: caching to speed up analysis


- Continuous integration tools: `wercker`, `GitHub Actions`, `Travis CI`, `Circle CI`.

&lt;img src="ci-tools.png" width="1047" /&gt;


---
## Shortcomings of current attempts

- Journals:

    1. Authors lack knowledge and/or time to make changes
    2. Reproducibility review is time/cost intensive for journals

- Education:

    1. Workshops often optional
    2. Only really at graduate level
    3. Takes time away from other important class topics
    4. Takes a lot of effort for professor to set up

- Software:

    1. Packages narrow in scope
    2. Complex functions, bad for new users
    3. Cumbersome, with steep learning curve
    4. CI tools: lack software-specific tools 

---
## Setting `fertile` apart: package goals

1) Be simple, with a small library of functions/tools that are straightforward to use.

2) Be accessible to a variety of users, with a relatively small learning curve.

3) Be able to address a wide variety of aspects of reproducibility, rather than just
one or two key issues.

4) Have features specific to a particular coding language that can address that
language’s unique challenges.

5) Be customizable, allowing users to choose for themselves which aspects of
reproducibility they want to focus on.

6) Be educational, teaching those that use it about why their projects are not
reproducible and how to correct that in the future.

7) Be applicable to a wide variety of domains.



---
## Component 1: accessible project files

---
## Component 2: organized project structure

---
## Component 3: documentation

---
## Component 5: randomness

---
## Component 6: readability and style

---
## Overview functions



---
## Customizability


---
## Educational features



---
## How it works: shims

---
## How it works: hidden files


---
## How it works: environment variables


---
## How it works: the dots (...)



---
## Potential applications: journal review


---
## Potential applications: teaching reproducibility

---
## Potential applications: miscellaneous

---
## Experimental testing: design

---
## Experimental testing: results


---
## Experimental testing: limitations


---
## Experimental testing: implications


---
## Conclusion: The future of `fertile`?


---
## How to access project materials

- GitHub repository for `fertile`: https://github.com/baumer-lab/fertile

- My repository for `fertile`, to track my changes:
https://github.com/ambertin/fertile

- Repository for this thesis, containing additional text, figures, and experimental data:
https://github.com/ ambertin/thesis


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
